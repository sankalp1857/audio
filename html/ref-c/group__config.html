<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0016)http://localhost -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<title>TrulyNatural SDK: Library Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="C Docs (7.4.0)"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 64px;">
  <td id="projectlogo"><img alt="Logo" src="sensory96.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TrulyNatural SDK
   &#160;<span id="projectnumber">7.4.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<div id="language">
  <ul class="sm sm-dox" id="language-menu">
    <li id="label">API Language:</li>
    <li><a href="../ref-c/index.html" class="current">C</a></li>
    <li><a href="../ref-java/index.html">Java</a></li>
  </ul>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__config.html','');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Library Configuration<div class="ingroups"><a class="el" href="group__c.html">C API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>API functions and settings that control overall TrulyNatural SDK behavior.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">SnsrAlloc virual method table.  <a href="structSnsrAlloc__Vmt.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gac460183131714fa27c716e4e3b2583d0"><td class="memItemLeft" align="right" valign="top">typedef uint32_t *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#gac460183131714fa27c716e4e3b2583d0">SnsrChipComms</a>) (uint32_t *in)</td></tr>
<tr class="memdesc:gac460183131714fa27c716e4e3b2583d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Security chip function type.  <a href="#gac460183131714fa27c716e4e3b2583d0">More...</a><br /></td></tr>
<tr class="separator:gac460183131714fa27c716e4e3b2583d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78c93afad69ebe969dd32913d1d4f37a"><td class="memItemLeft" align="right" valign="top"><a id="ga78c93afad69ebe969dd32913d1d4f37a"></a>
typedef uint64_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga78c93afad69ebe969dd32913d1d4f37a">SnsrClock</a>) (void)</td></tr>
<tr class="memdesc:ga78c93afad69ebe969dd32913d1d4f37a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Session timestamp profiling type. <br /></td></tr>
<tr class="separator:ga78c93afad69ebe969dd32913d1d4f37a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0f97b838e3a2dd80e4f1d52e3c71ecf"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#gaa0f97b838e3a2dd80e4f1d52e3c71ecf">SnsrPanic</a>) (const char *format, va_list a)</td></tr>
<tr class="memdesc:gaa0f97b838e3a2dd80e4f1d52e3c71ecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Library-wide fatal error function type.  <a href="#gaa0f97b838e3a2dd80e4f1d52e3c71ecf">More...</a><br /></td></tr>
<tr class="separator:gaa0f97b838e3a2dd80e4f1d52e3c71ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga3526fd823bf229ecc12d54ff05191b59"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga3526fd823bf229ecc12d54ff05191b59">SnsrAllocRC</a> { <br />
&#160;&#160;<a class="el" href="group__config.html#gga3526fd823bf229ecc12d54ff05191b59a4ed3bc67b07afaf6182d1062b6a4cf9a">SNSR_ALLOC_RC_OK</a>, 
<a class="el" href="group__config.html#gga3526fd823bf229ecc12d54ff05191b59a43dcb0d877a6adb484b1cb2c1b8067b5">SNSR_ALLOC_RC_ERROR</a>, 
<a class="el" href="group__config.html#gga3526fd823bf229ecc12d54ff05191b59ad2973d6e5ce453c2d23d8670a92d05fc">SNSR_ALLOC_RC_ALLOCATOR_EXISTS</a>, 
<a class="el" href="group__config.html#gga3526fd823bf229ecc12d54ff05191b59aa53e178e4c6c4064c56d7aed8506f17c">SNSR_ALLOC_RC_ALLOC_FAILED</a>, 
<br />
&#160;&#160;<a class="el" href="group__config.html#gga3526fd823bf229ecc12d54ff05191b59aa9ed0f879f44c4061613bbab974b8dcd">SNSR_ALLOC_RC_NO_FUNC</a>, 
<a class="el" href="group__config.html#gga3526fd823bf229ecc12d54ff05191b59a30e3572efcbf418630212447fdc6566e">SNSR_ALLOC_RC_NOT_SUPPORTED</a>
<br />
 }</td></tr>
<tr class="memdesc:ga3526fd823bf229ecc12d54ff05191b59"><td class="mdescLeft">&#160;</td><td class="mdescRight">SnsrAlloc return code.  <a href="group__config.html#ga3526fd823bf229ecc12d54ff05191b59">More...</a><br /></td></tr>
<tr class="separator:ga3526fd823bf229ecc12d54ff05191b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17e4883da0f3f2d3dab6bdd34f663e44"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga17e4883da0f3f2d3dab6bdd34f663e44">SnsrConfig</a> { <br />
&#160;&#160;<a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60">SNSR_CONFIG_ALLOC</a>, 
<a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a7e783b9faab849dbabc8ee18cd702d0d">SNSR_CONFIG_ALLOC_ADD_POOL</a>, 
<a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44ac8c7cc125a3a12062942d5e64fc64521">SNSR_CONFIG_PANIC_FUNC</a>, 
<a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a7b39ee194f00fe2dde65560163f8ac06">SNSR_CONFIG_STT_SUPPORT</a>, 
<br />
&#160;&#160;<a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a630a990868b2f8be71461c7d123ebc4d">SNSR_CONFIG_THREAD_SUPPORT</a>, 
<a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a4f478b7d5f909b05f8821a93c6519739">SNSR_CONFIG_SECURITY_CHIP</a>, 
<a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a8ac9abbc55821acc66efc536c31500fd">SNSR_CONFIG_CLOCK_FUNC</a>
<br />
 }</td></tr>
<tr class="separator:ga17e4883da0f3f2d3dab6bdd34f663e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1444c9b1fecd9972ada991c200f2dafd"><td class="memItemLeft" align="right" valign="top">SNSR_API <a class="el" href="group__session.html#gab691a3e76091d07b0ebfac7c62f37964">SnsrRC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga1444c9b1fecd9972ada991c200f2dafd">snsrTearDown</a> (void)</td></tr>
<tr class="memdesc:ga1444c9b1fecd9972ada991c200f2dafd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases library-wide resources.  <a href="#ga1444c9b1fecd9972ada991c200f2dafd">More...</a><br /></td></tr>
<tr class="separator:ga1444c9b1fecd9972ada991c200f2dafd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fbc7c034a4a47ed497f1851bf9a4b75"><td class="memItemLeft" align="right" valign="top">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga4fbc7c034a4a47ed497f1851bf9a4b75">snsrAllocStdlib</a> (void)</td></tr>
<tr class="memdesc:ga4fbc7c034a4a47ed497f1851bf9a4b75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Standard C library allocator.  <a href="#ga4fbc7c034a4a47ed497f1851bf9a4b75">More...</a><br /></td></tr>
<tr class="separator:ga4fbc7c034a4a47ed497f1851bf9a4b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaafd6a89b248743f6c20af81e7b1590d0"><td class="memItemLeft" align="right" valign="top">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#gaafd6a89b248743f6c20af81e7b1590d0">snsrAllocBuddy</a> (void *poolStart, size_t poolSizeInBytes)</td></tr>
<tr class="memdesc:gaafd6a89b248743f6c20af81e7b1590d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buddy allocator.  <a href="#gaafd6a89b248743f6c20af81e7b1590d0">More...</a><br /></td></tr>
<tr class="separator:gaafd6a89b248743f6c20af81e7b1590d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7508890ad6d92fa3380c0eb1dd3f4d43"><td class="memItemLeft" align="right" valign="top">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga7508890ad6d92fa3380c0eb1dd3f4d43">snsrAllocTLSF</a> (void *poolStart, size_t poolSizeInBytes)</td></tr>
<tr class="memdesc:ga7508890ad6d92fa3380c0eb1dd3f4d43"><td class="mdescLeft">&#160;</td><td class="mdescRight">TLSF allocator.  <a href="#ga7508890ad6d92fa3380c0eb1dd3f4d43">More...</a><br /></td></tr>
<tr class="separator:ga7508890ad6d92fa3380c0eb1dd3f4d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84ee8fe80f4f21e5d486585acd65e515"><td class="memItemLeft" align="right" valign="top">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga84ee8fe80f4f21e5d486585acd65e515">snsrAllocLock</a> (const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a> *vmt)</td></tr>
<tr class="memdesc:ga84ee8fe80f4f21e5d486585acd65e515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread-safe allocator wrapper.  <a href="#ga84ee8fe80f4f21e5d486585acd65e515">More...</a><br /></td></tr>
<tr class="separator:ga84ee8fe80f4f21e5d486585acd65e515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b19514d494518e70de1958bf83fc348"><td class="memItemLeft" align="right" valign="top">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga7b19514d494518e70de1958bf83fc348">snsrAllocPerf</a> (const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a> *vmt)</td></tr>
<tr class="memdesc:ga7b19514d494518e70de1958bf83fc348"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics-gathering allocator wrapper.  <a href="#ga7b19514d494518e70de1958bf83fc348">More...</a><br /></td></tr>
<tr class="separator:ga7b19514d494518e70de1958bf83fc348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf88edd658d0314f6ad718c3992d0aeb"><td class="memItemLeft" align="right" valign="top">SNSR_API size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#gadf88edd658d0314f6ad718c3992d0aeb">snsrAllocPerfStats</a> (<a class="el" href="group__stream-ops.html#gae9bad3692a515cd1086407597ccc4bbb">SnsrStream</a> out)</td></tr>
<tr class="memdesc:gadf88edd658d0314f6ad718c3992d0aeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Show allocator statistics.  <a href="#gadf88edd658d0314f6ad718c3992d0aeb">More...</a><br /></td></tr>
<tr class="separator:gadf88edd658d0314f6ad718c3992d0aeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c4800ee244ecd0d3097dfe4cddf808f"><td class="memItemLeft" align="right" valign="top">SNSR_API <a class="el" href="group__session.html#gab691a3e76091d07b0ebfac7c62f37964">SnsrRC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f">snsrConfig</a> (<a class="el" href="group__config.html#ga17e4883da0f3f2d3dab6bdd34f663e44">SnsrConfig</a> config,...)</td></tr>
<tr class="memdesc:ga4c4800ee244ecd0d3097dfe4cddf808f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global library configuration changes.  <a href="#ga4c4800ee244ecd0d3097dfe4cddf808f">More...</a><br /></td></tr>
<tr class="separator:ga4c4800ee244ecd0d3097dfe4cddf808f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>API functions and settings that control overall TrulyNatural SDK behavior. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gac460183131714fa27c716e4e3b2583d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac460183131714fa27c716e4e3b2583d0">&#9670;&nbsp;</a></span>SnsrChipComms</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t*(* SnsrChipComms) (uint32_t *in)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Security chip function type. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a4f478b7d5f909b05f8821a93c6519739" title="Hardware security device communication.">SNSR_CONFIG_SECURITY_CHIP</a> </dd></dl>

</div>
</div>
<a id="gaa0f97b838e3a2dd80e4f1d52e3c71ecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa0f97b838e3a2dd80e4f1d52e3c71ecf">&#9670;&nbsp;</a></span>SnsrPanic</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* SnsrPanic) (const char *format, va_list a)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Library-wide fatal error function type. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44ac8c7cc125a3a12062942d5e64fc64521" title="Set the fatal error function.">SNSR_CONFIG_PANIC_FUNC</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga3526fd823bf229ecc12d54ff05191b59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3526fd823bf229ecc12d54ff05191b59">&#9670;&nbsp;</a></span>SnsrAllocRC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__config.html#ga3526fd823bf229ecc12d54ff05191b59">SnsrAllocRC</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SnsrAlloc return code. </p>
<p>Used only with <a class="el" href="structSnsrAlloc__Vmt.html" title="SnsrAlloc virual method table.">SnsrAlloc_Vmt</a> implementation methods. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga3526fd823bf229ecc12d54ff05191b59a4ed3bc67b07afaf6182d1062b6a4cf9a"></a>SNSR_ALLOC_RC_OK&#160;</td><td class="fielddoc"><p>Success. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3526fd823bf229ecc12d54ff05191b59a43dcb0d877a6adb484b1cb2c1b8067b5"></a>SNSR_ALLOC_RC_ERROR&#160;</td><td class="fielddoc"><p>Unspecified failure. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3526fd823bf229ecc12d54ff05191b59ad2973d6e5ce453c2d23d8670a92d05fc"></a>SNSR_ALLOC_RC_ALLOCATOR_EXISTS&#160;</td><td class="fielddoc"><p>Allocator already configured. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3526fd823bf229ecc12d54ff05191b59aa53e178e4c6c4064c56d7aed8506f17c"></a>SNSR_ALLOC_RC_ALLOC_FAILED&#160;</td><td class="fielddoc"><p>Out of heap memory. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3526fd823bf229ecc12d54ff05191b59aa9ed0f879f44c4061613bbab974b8dcd"></a>SNSR_ALLOC_RC_NO_FUNC&#160;</td><td class="fielddoc"><p>Required VMT method is NULL. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3526fd823bf229ecc12d54ff05191b59a30e3572efcbf418630212447fdc6566e"></a>SNSR_ALLOC_RC_NOT_SUPPORTED&#160;</td><td class="fielddoc"><p>Not supported by this allocator. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga17e4883da0f3f2d3dab6bdd34f663e44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga17e4883da0f3f2d3dab6bdd34f663e44">&#9670;&nbsp;</a></span>SnsrConfig</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__config.html#ga17e4883da0f3f2d3dab6bdd34f663e44">SnsrConfig</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60"></a>SNSR_CONFIG_ALLOC&#160;</td><td class="fielddoc"><p>Replace the heap allocator used in the <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> SDK. </p>
<p>This replaces the standard C heap allocator (<code>malloc()</code>, <code>realloc()</code>, <code>free()</code>) with a custom library-specific allocator.</p>
<p>This function will fail if any <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> heap allocations have been made. Best practice is to configure the heap manager before calling any other library functions.</p>
<p>Example: </p><div class="fragment"><div class="line">// in main()</div><div class="line">#define SIZE_IN_BYTES = 512000;</div><div class="line">static size_t segment[SIZE_IN_BYTES / sizeof(size_t)];</div><div class="line"></div><div class="line">snsrConfig(SNSR_CONFIG_ALLOC, snsrAllocTLSF(segment, sizeof(segment)));</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td><a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60" title="Replace the heap allocator used in the TrulyNatural SDK.">SNSR_CONFIG_ALLOC</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vmt</td><td><code>const</code> <a class="el" href="structSnsrAlloc__Vmt.html" title="SnsrAlloc virual method table.">SnsrAlloc_Vmt</a> *. This struct must remain valid at least until <a class="el" href="group__config.html#ga1444c9b1fecd9972ada991c200f2dafd" title="Releases library-wide resources.">snsrTearDown()</a> is called. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a> </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="gga17e4883da0f3f2d3dab6bdd34f663e44a7e783b9faab849dbabc8ee18cd702d0d"></a>SNSR_CONFIG_ALLOC_ADD_POOL&#160;</td><td class="fielddoc"><p>Add a memory pool to a custom heap allocator. </p>
<p>This adds an additional memory segment to use as backing store for the custom heap allocator configured with <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60" title="Replace the heap allocator used in the TrulyNatural SDK.">SNSR_CONFIG_ALLOC</a>.</p>
<p><code>snsrConfig(SNSR_CONFIG_ALLOC_ADD_POOL, ...)</code> will return <a class="el" href="group__session.html#ggab691a3e76091d07b0ebfac7c62f37964acfe93f4e73e4f6436bb15df941bbce6d" title="The feature is not supported by the current library configuration.">SNSR_RC_NOT_SUPPORTED</a> if the custom allocator does not support multiple backing store segments.</p>
<p>Example: </p><div class="fragment"><div class="line">#define POOL_SIZE = 128000;</div><div class="line">static size_t pool[POOL_SIZE / sizeof(size_t)];</div><div class="line">snsrConfig(SNSR_CONFIG_ALLOC_ADD_POOL, pool, sizeof(pool));</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td><a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a7e783b9faab849dbabc8ee18cd702d0d" title="Add a memory pool to a custom heap allocator.">SNSR_CONFIG_ALLOC_ADD_POOL</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">poolStart</td><td><code>void</code> <code>*</code> to the start of a read-write memory segment to add to the allocator store. This must be aligned to the word size of the CPU. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">poolSizeInBytes</td><td><code>size_t</code> the extent of <code>poolStart</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60" title="Replace the heap allocator used in the TrulyNatural SDK.">SNSR_CONFIG_ALLOC</a> </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="gga17e4883da0f3f2d3dab6bdd34f663e44ac8c7cc125a3a12062942d5e64fc64521"></a>SNSR_CONFIG_PANIC_FUNC&#160;</td><td class="fielddoc"><p>Set the fatal error function. </p>
<p>This panic function is called in the event of an unrecoverable error, such as the inability to allocate sufficient RAM.</p>
<p>The default behavior if <code>panicFunc</code> is <code>NULL</code> is to print an error message to <code>stderr</code> and then abort the process. This is undesirable on small embedded platforms with either no OS, or a very lightweight RTOS, that run from a single memory image.</p>
<p>If <code>panicFunc</code> is called, all <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> handles are invalid and must be discarded. An effective way to do this is to use a custom heap allocator, which allows all open <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> handles to be abandoned by reclaiming the heap segment.</p>
<p>Example: </p><div class="fragment"><div class="line">#include &lt;setjmp.h&gt;</div><div class="line">#include &lt;stdio.h&gt;</div><div class="line"></div><div class="line">static jmp_buf PanicJmp;</div><div class="line"></div><div class="line">static void</div><div class="line">panicFunc(const char *format, va_list a)</div><div class="line">{</div><div class="line">  fprintf(stderr, &quot;\nPANIC: &quot;);</div><div class="line">  vfprintf(stderr, format, a);</div><div class="line">  fprintf(stderr, &quot;\n\n&quot;);</div><div class="line">  longjmp(PanicJmp, SNSR_RC_NO_MEMORY);</div><div class="line">}</div><div class="line"></div><div class="line">// In main() before any API calls that are not snsrConfig()</div><div class="line">int r;</div><div class="line">snsrConfig(SNSR_CONFIG_PANIC_FUNC, panicFunc);</div><div class="line">if ((r = setjmp(PanicJmp))) {</div><div class="line">  snsrTearDown();</div><div class="line">  // handle out-of-memory case. Abandon heap, re-initialize.</div><div class="line">}</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td><a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44ac8c7cc125a3a12062942d5e64fc64521" title="Set the fatal error function.">SNSR_CONFIG_PANIC_FUNC</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">panicFunc</td><td><a class="el" href="group__config.html#gaa0f97b838e3a2dd80e4f1d52e3c71ecf" title="Library-wide fatal error function type.">SnsrPanic</a> callback function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a7e783b9faab849dbabc8ee18cd702d0d" title="Add a memory pool to a custom heap allocator.">SNSR_CONFIG_ALLOC_ADD_POOL</a> </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="gga17e4883da0f3f2d3dab6bdd34f663e44a7b39ee194f00fe2dde65560163f8ac06"></a>SNSR_CONFIG_STT_SUPPORT&#160;</td><td class="fielddoc"><p>Library Speech-To-Text support. </p>
<p>Returns <a class="el" href="group__session.html#ggab691a3e76091d07b0ebfac7c62f37964aa0b071bbf2638a0a27f78dfc2f163971" title="Operation completed successfully.">SNSR_RC_OK</a> if the <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> SDK supports Speech-To-Text models, or <a class="el" href="group__session.html#ggab691a3e76091d07b0ebfac7c62f37964acfe93f4e73e4f6436bb15df941bbce6d" title="The feature is not supported by the current library configuration.">SNSR_RC_NOT_SUPPORTED</a> if STT support is not available.</p>
<dl class="section note"><dt>Note</dt><dd>You may retrieve this value even if active library handles exist.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td><a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a7b39ee194f00fe2dde65560163f8ac06" title="Library Speech-To-Text support.">SNSR_CONFIG_STT_SUPPORT</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a> </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="gga17e4883da0f3f2d3dab6bdd34f663e44a630a990868b2f8be71461c7d123ebc4d"></a>SNSR_CONFIG_THREAD_SUPPORT&#160;</td><td class="fielddoc"><p>Library multithreading support. </p>
<p>Returns <a class="el" href="group__session.html#ggab691a3e76091d07b0ebfac7c62f37964aa0b071bbf2638a0a27f78dfc2f163971" title="Operation completed successfully.">SNSR_RC_OK</a> if the <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> SDK supports running multi-threaded models, or <a class="el" href="group__session.html#ggab691a3e76091d07b0ebfac7c62f37964acfe93f4e73e4f6436bb15df941bbce6d" title="The feature is not supported by the current library configuration.">SNSR_RC_NOT_SUPPORTED</a> if thread support is not available.</p>
<dl class="section note"><dt>Note</dt><dd>You may retrieve this value even if active library handles exist.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td><a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a630a990868b2f8be71461c7d123ebc4d" title="Library multithreading support.">SNSR_CONFIG_THREAD_SUPPORT</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a> </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="gga17e4883da0f3f2d3dab6bdd34f663e44a4f478b7d5f909b05f8821a93c6519739"></a>SNSR_CONFIG_SECURITY_CHIP&#160;</td><td class="fielddoc"><p>Hardware security device communication. </p>
<p>Use if, and only if, recommended by Sensory.</p>
<p>Example: </p><div class="fragment"><div class="line">uint32_t *chipComms(uint32_t *in) {</div><div class="line">  // communicate with hardware</div><div class="line">}</div><div class="line"></div><div class="line">snsrConfig(SNSR_CONFIG_SECURITY_CHIP, chipComms);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td><a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a4f478b7d5f909b05f8821a93c6519739" title="Hardware security device communication.">SNSR_CONFIG_SECURITY_CHIP</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">commsFunc</td><td><a class="el" href="group__config.html#gac460183131714fa27c716e4e3b2583d0" title="Security chip function type.">SnsrChipComms</a> callback function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a> </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="gga17e4883da0f3f2d3dab6bdd34f663e44a8ac9abbc55821acc66efc536c31500fd"></a>SNSR_CONFIG_CLOCK_FUNC&#160;</td><td class="fielddoc"><p>Set high-resolution monotonic time function and resolution. </p>
<p>Sets a function that must return a high-resolution monotonically-increasing value that measures clock time. This is used to limit the maximum amount of time spent in any one call to <a class="el" href="group__session.html#ga620b84aa9fb08cb41f330c34e7e09c07" title="Processes data in a session.">snsrPush()</a> with <a class="el" href="group__task.html#ga2056c278d40a1a9e8786fc264322498e" title="Sets a limit to the maximum processing time snsrPush() should consume.">SNSR_PUSH_DURATION_LIMIT</a>, and for recognition pipeline profiling.</p>
<p>Example: </p><div class="fragment"><div class="line">#include &lt;time.h&gt;</div><div class="line"></div><div class="line">static uint64_t clockFunc(void) {</div><div class="line">  struct timespec t;</div><div class="line">  clock_gettime(CLOCK_MONOTONIC, &amp;t);</div><div class="line">  return (uint64_t)t.tv_sec * 1e9 + (uint64_t)t.tv_nsec;</div><div class="line">}</div><div class="line"></div><div class="line">int main(int argc, char *argv[]) {</div><div class="line"></div><div class="line">  snsrConfig(SNSR_CONFIG_CLOCK_FUNC, clockFunc, 1e9);</div><div class="line">}</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td><a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a8ac9abbc55821acc66efc536c31500fd" title="Set high-resolution monotonic time function and resolution.">SNSR_CONFIG_CLOCK_FUNC</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clockFunc</td><td><a class="el" href="group__config.html#ga78c93afad69ebe969dd32913d1d4f37a" title="Session timestamp profiling type.">SnsrClock</a> callback function. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resolution</td><td>double number of ticks per second. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__session.html#ga88f61ee60680c16c759054417fe69ab7" title="Produces a human-readable SnsrSession model inference profile.">snsrProfile()</a>, <a class="el" href="group__session.html#ga620b84aa9fb08cb41f330c34e7e09c07" title="Processes data in a session.">snsrPush()</a>, <a class="el" href="group__task.html#ga2056c278d40a1a9e8786fc264322498e" title="Sets a limit to the maximum processing time snsrPush() should consume.">SNSR_PUSH_DURATION_LIMIT</a> </dd></dl>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaafd6a89b248743f6c20af81e7b1590d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaafd6a89b248743f6c20af81e7b1590d0">&#9670;&nbsp;</a></span>snsrAllocBuddy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a>* snsrAllocBuddy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>poolStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>poolSizeInBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Buddy allocator. </p>
<p>This is an implementation of the <a href="https://en.wikipedia.org/wiki/Buddy_memory_allocation">Buddy memory allocation</a> heap allocation algorithm. The size of returned blocks is the smallest power-of-two in which the requested block size fits. This allocator is fast and has low external fragmentation, but this comes at the expense of significant internal fragmentation (e.g. a 1025 byte request requires allocation of a 2048 byte block, wasting 1023 bytes).</p>
<p>This is a customization of the <a href="https://www.sqlite.org/malloc.html#memsys5">memsys5 allocator from SQLite</a> that is in the Public Domain.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor">#define POOL_SIZE = 128000;</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> pool[POOL_SIZE / <span class="keyword">sizeof</span>(size_t)];</div><div class="line"></div><div class="line"><span class="comment">// in main, before any other snsr* calls</span></div><div class="line"><a class="code" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f">snsrConfig</a>(<a class="code" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60">SNSR_CONFIG_ALLOC</a>, <a class="code" href="group__config.html#gaafd6a89b248743f6c20af81e7b1590d0">snsrAllocBuddy</a>(pool, <span class="keyword">sizeof</span>(pool)));</div></div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>This allocator is not thread-safe. If your application runs <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> code from more than one execution thread you must add mutual exclusion locking by wrapping this allocator with <a class="el" href="group__config.html#ga84ee8fe80f4f21e5d486585acd65e515" title="Thread-safe allocator wrapper.">snsrAllocLock()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">poolStart</td><td><code>void</code> <code>*</code> to the start of a read-write memory segment to use as the allocator store. This address must be aligned to the word size of the CPU. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">poolSizeInBytes</td><td>the number of bytes available at <code>poolStart</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new custom allocator definition.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60" title="Replace the heap allocator used in the TrulyNatural SDK.">SNSR_CONFIG_ALLOC</a>, <a class="el" href="group__config.html#ga84ee8fe80f4f21e5d486585acd65e515" title="Thread-safe allocator wrapper.">snsrAllocLock()</a> </dd></dl>

</div>
</div>
<a id="ga84ee8fe80f4f21e5d486585acd65e515"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga84ee8fe80f4f21e5d486585acd65e515">&#9670;&nbsp;</a></span>snsrAllocLock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a>* snsrAllocLock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a> *&#160;</td>
          <td class="paramname"><em>vmt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thread-safe allocator wrapper. </p>
<p>Adds mutual exclusion locks to the wrapped allocator.</p>
<p>This wrapper has no effect if the <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> SDK does not have thread support on the target platform: The function adds the lock wrapper only if <code>snsrConfig(SNSR_CONFIG_THREAD_SUPPORT) == SNSR_RC_OK</code></p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor">#define POOL_SIZE = 128000;</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> pool[POOL_SIZE / <span class="keyword">sizeof</span>(size_t)];</div><div class="line"></div><div class="line"><span class="comment">// in main, before any other snsr* calls</span></div><div class="line"><a class="code" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f">snsrConfig</a>(<a class="code" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60">SNSR_CONFIG_ALLOC</a>,</div><div class="line">           <a class="code" href="group__config.html#ga84ee8fe80f4f21e5d486585acd65e515">snsrAllocLock</a>(<a class="code" href="group__config.html#ga7508890ad6d92fa3380c0eb1dd3f4d43">snsrAllocTLSF</a>(pool, <span class="keyword">sizeof</span>(pool))));</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vmt</td><td>Custom allocator definition. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new custom allocator definition that is thread-safe.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60" title="Replace the heap allocator used in the TrulyNatural SDK.">SNSR_CONFIG_ALLOC</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a630a990868b2f8be71461c7d123ebc4d" title="Library multithreading support.">SNSR_CONFIG_THREAD_SUPPORT</a> </dd></dl>

</div>
</div>
<a id="ga7b19514d494518e70de1958bf83fc348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7b19514d494518e70de1958bf83fc348">&#9670;&nbsp;</a></span>snsrAllocPerf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a>* snsrAllocPerf </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a> *&#160;</td>
          <td class="paramname"><em>vmt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Statistics-gathering allocator wrapper. </p>
<p>Adds instrumentation to an allocator to determine the heap high-water mark, number of allocations, internal fragmentation overhead, etc.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="comment">// in main, before any other snsr* calls</span></div><div class="line"><a class="code" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f">snsrConfig</a>(<a class="code" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60">SNSR_CONFIG_ALLOC</a>, <a class="code" href="group__config.html#ga7b19514d494518e70de1958bf83fc348">snsrAllocPerf</a>(<a class="code" href="group__config.html#ga4fbc7c034a4a47ed497f1851bf9a4b75">snsrAllocStdlib</a>()));</div><div class="line"><span class="comment">// application code</span></div><div class="line"><a class="code" href="group__config.html#ga1444c9b1fecd9972ada991c200f2dafd">snsrTearDown</a>();</div><div class="line"><a class="code" href="group__config.html#gadf88edd658d0314f6ad718c3992d0aeb">snsrAllocPerfStats</a>(<a class="code" href="group__stream-provider.html#gab63efa11527352b846ba99c7595fb26d">snsrStreamFromFILE</a>(stdout, <a class="code" href="group__stream-provider.html#ggaf50538c808b2b9e447092aace9280340a72abd72da92200bfcd3d5698b51dcd72">SNSR_ST_MODE_WRITE</a>));</div></div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>This wrapper adds mutual exclusion locks to the wrapped allocator. Do not use with <a class="el" href="group__config.html#ga84ee8fe80f4f21e5d486585acd65e515" title="Thread-safe allocator wrapper.">snsrAllocLock()</a>, as that will result in deadlock or undefined behavior.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vmt</td><td>Custom allocator definition. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new custom allocator definition that gathers allocation statistics.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60" title="Replace the heap allocator used in the TrulyNatural SDK.">SNSR_CONFIG_ALLOC</a> </dd></dl>

</div>
</div>
<a id="gadf88edd658d0314f6ad718c3992d0aeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf88edd658d0314f6ad718c3992d0aeb">&#9670;&nbsp;</a></span>snsrAllocPerfStats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SNSR_API size_t snsrAllocPerfStats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stream-ops.html#gae9bad3692a515cd1086407597ccc4bbb">SnsrStream</a>&#160;</td>
          <td class="paramname"><em>out</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Show allocator statistics. </p>
<p>Returns the smallest heap pool size that could be sufficient to repeat the instrumented allocation run. To reduce the chance of out-of-heap errors, allocate a pool that is at least 10% larger than this minimum.</p>
<p>If the <code>out</code> <a class="el" href="group__stream-ops.html#gae9bad3692a515cd1086407597ccc4bbb" title="Opaque stream handle.">SnsrStream</a> is not <code>NULL</code>, this function writes heap allocator statistics in human-readable form to this stream.</p>
<dl class="section note"><dt>Note</dt><dd>Requires use of <a class="el" href="group__config.html#ga7b19514d494518e70de1958bf83fc348" title="Statistics-gathering allocator wrapper.">snsrAllocPerf</a> to gather statistics.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">out</td><td>writable <a class="el" href="group__stream-ops.html#gae9bad3692a515cd1086407597ccc4bbb" title="Opaque stream handle.">SnsrStream</a> to receive allocator statistics, or <code>NULL</code> to produce no output. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The smallest heap pool size required to repeat the instrumented allocation run. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga7b19514d494518e70de1958bf83fc348" title="Statistics-gathering allocator wrapper.">snsrAllocPerf</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60" title="Replace the heap allocator used in the TrulyNatural SDK.">SNSR_CONFIG_ALLOC</a> </dd></dl>

</div>
</div>
<a id="ga4fbc7c034a4a47ed497f1851bf9a4b75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4fbc7c034a4a47ed497f1851bf9a4b75">&#9670;&nbsp;</a></span>snsrAllocStdlib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a>* snsrAllocStdlib </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Standard C library allocator. </p>
<p>This is the standard library allocator: <code>malloc()</code>, <code>realloc()</code>, and <code>free()</code>). It is the default heap allocator used unless overridden with <code>snsrConfig(SNSR_CONFIG_ALLOC, ...);</code></p>
<p>Example: </p><div class="fragment"><div class="line"><span class="comment">// in main, before any other snsr* calls</span></div><div class="line"><a class="code" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f">snsrConfig</a>(<a class="code" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60">SNSR_CONFIG_ALLOC</a>, <a class="code" href="group__config.html#ga4fbc7c034a4a47ed497f1851bf9a4b75">snsrAllocStdlib</a>());</div></div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>This allocator is not thread-safe. If your application runs <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> code from more than one execution thread you must add mutual exclusion locking by wrapping this allocator with <a class="el" href="group__config.html#ga84ee8fe80f4f21e5d486585acd65e515" title="Thread-safe allocator wrapper.">snsrAllocLock()</a>.</dd></dl>
<p>Whether this allocator works with <a class="el" href="group__config.html#ga7b19514d494518e70de1958bf83fc348" title="Statistics-gathering allocator wrapper.">snsrAllocPerf()</a> depends on whether the standard C library for the platform has a <code>malloc_usable_size()</code> or <code>malloc_size()</code> implementation available. If in doubt, use <a class="el" href="group__config.html#ga7508890ad6d92fa3380c0eb1dd3f4d43" title="TLSF allocator.">snsrAllocTLSF()</a> for performance measurement instead.</p>
<dl class="section return"><dt>Returns</dt><dd>A new custom allocator definition. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60" title="Replace the heap allocator used in the TrulyNatural SDK.">SNSR_CONFIG_ALLOC</a>, <a class="el" href="group__config.html#ga84ee8fe80f4f21e5d486585acd65e515" title="Thread-safe allocator wrapper.">snsrAllocLock()</a> </dd></dl>

</div>
</div>
<a id="ga7508890ad6d92fa3380c0eb1dd3f4d43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7508890ad6d92fa3380c0eb1dd3f4d43">&#9670;&nbsp;</a></span>snsrAllocTLSF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SNSR_API const <a class="el" href="structSnsrAlloc__Vmt.html">SnsrAlloc_Vmt</a>* snsrAllocTLSF </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>poolStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>poolSizeInBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>TLSF allocator. </p>
<p>This <a href="http://www.gii.upv.es/tlsf/main/docs">Two-level Segregated Fit allocator</a> is recommended for embedded systems. It has <code>O(1)</code> cost for most operations, low overhead, low internal fragmentation, and supports multiple backing store pools for the heap.</p>
<p>This a customization of a <a href="https://github.com/OlegHahm/tlsf/tree/27c65c2966dfc6f7055fbeaf63141ce39cc1f16c">TLSF library</a> that is in the Public Domain.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor">#define POOL_SIZE = 128000;</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> pool[POOL_SIZE / <span class="keyword">sizeof</span>(size_t)];</div><div class="line"></div><div class="line"><span class="comment">// in main, before any other snsr* calls</span></div><div class="line"><a class="code" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f">snsrConfig</a>(<a class="code" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60">SNSR_CONFIG_ALLOC</a>, <a class="code" href="group__config.html#ga7508890ad6d92fa3380c0eb1dd3f4d43">snsrAllocTLSF</a>(pool, <span class="keyword">sizeof</span>(pool)));</div></div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>This allocator is not thread-safe. If your application runs <a href="https://www.sensory.com/natural-language-understanding/">TrulyNatural</a> code from more than one execution thread you must add mutual exclusion locking by wrapping this allocator with <a class="el" href="group__config.html#ga84ee8fe80f4f21e5d486585acd65e515" title="Thread-safe allocator wrapper.">snsrAllocLock()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">poolStart</td><td><code>void</code> <code>*</code> to the start of a read-write memory segment to use as the allocator store. This address must be aligned to the word size of the CPU. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">poolSizeInBytes</td><td>the number of bytes available at <code>poolStart</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new custom allocator definition.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__config.html#ga4c4800ee244ecd0d3097dfe4cddf808f" title="Global library configuration changes.">snsrConfig()</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a5aa674f309faa73529098e9ee6e08d60" title="Replace the heap allocator used in the TrulyNatural SDK.">SNSR_CONFIG_ALLOC</a>, <a class="el" href="group__config.html#gga17e4883da0f3f2d3dab6bdd34f663e44a7e783b9faab849dbabc8ee18cd702d0d" title="Add a memory pool to a custom heap allocator.">SNSR_CONFIG_ALLOC_ADD_POOL</a>, <a class="el" href="group__config.html#ga84ee8fe80f4f21e5d486585acd65e515" title="Thread-safe allocator wrapper.">snsrAllocLock()</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="spot-data_8c-example.html#a12">spot-data.c</a>.</dd>
</dl>

</div>
</div>
<a id="ga4c4800ee244ecd0d3097dfe4cddf808f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4c4800ee244ecd0d3097dfe4cddf808f">&#9670;&nbsp;</a></span>snsrConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SNSR_API <a class="el" href="group__session.html#gab691a3e76091d07b0ebfac7c62f37964">SnsrRC</a> snsrConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__config.html#ga17e4883da0f3f2d3dab6bdd34f663e44">SnsrConfig</a>&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global library configuration changes. </p>
<p>Use this function to change the overall behavior of the TrulyNatural SDK.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Unless noted otherwise in the description of the <code>config</code> setting, you must call this function only when no library handles exist: Before any other API function at start-up, or after a call to <a class="el" href="group__config.html#ga1444c9b1fecd9972ada991c200f2dafd" title="Releases library-wide resources.">snsrTearDown()</a>.</li>
<li>This function is <b>not</b> thread-safe.</li>
<li>The number of arguments expected depend entirely on the <code>config</code> parameter. Failure to provide all the expected arguments with the expected types will lead to undefined behavior.</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>configuration type. This type determines what additional arguments are expected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__session.html#ggab691a3e76091d07b0ebfac7c62f37964aa0b071bbf2638a0a27f78dfc2f163971" title="Operation completed successfully.">SNSR_RC_OK</a> for success, any other value indicates failure. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="live-enroll_8c-example.html#a59">live-enroll.c</a>, <a class="el" href="snsr-edit_8c-example.html#a10">snsr-edit.c</a>, <a class="el" href="snsr-eval_8c-example.html#a62">snsr-eval.c</a>, <a class="el" href="spot-convert_8c-example.html#a36">spot-convert.c</a>, <a class="el" href="spot-data_8c-example.html#a8">spot-data.c</a>, and <a class="el" href="spot-enroll_8c-example.html#a45">spot-enroll.c</a>.</dd>
</dl>

</div>
</div>
<a id="ga1444c9b1fecd9972ada991c200f2dafd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1444c9b1fecd9972ada991c200f2dafd">&#9670;&nbsp;</a></span>snsrTearDown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SNSR_API <a class="el" href="group__session.html#gab691a3e76091d07b0ebfac7c62f37964">SnsrRC</a> snsrTearDown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases library-wide resources. </p>
<p>Resets the TrulyNatural SDK library to the initial defaults and releases all library-wide resources. Calling this function is optional. It is most useful to suppress false positives when tracking down heap leaks with a tool such as <a href="http://valgrind.org">Valgrind</a>. </p><dl class="section note"><dt>Note</dt><dd>Do <b>not</b> call this function unless all SDK handles (<a class="el" href="group__session.html#ga1c1a58d3e64ee98c44d48c0b0e6ffd47" title="Opaque session handle.">SnsrSession</a>, <a class="el" href="group__stream-ops.html#gae9bad3692a515cd1086407597ccc4bbb" title="Opaque stream handle.">SnsrStream</a> etc.) have been released. Doing so will lead to undefined behavior.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__session.html#ggab691a3e76091d07b0ebfac7c62f37964aa0b071bbf2638a0a27f78dfc2f163971" title="Operation completed successfully.">SNSR_RC_OK</a> for success, any other value indicates failure. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="live-enroll_8c-example.html#a94">live-enroll.c</a>, <a class="el" href="snsr-edit_8c-example.html#a44">snsr-edit.c</a>, <a class="el" href="snsr-eval_8c-example.html#a111">snsr-eval.c</a>, <a class="el" href="spot-convert_8c-example.html#a52">spot-convert.c</a>, <a class="el" href="spot-data_8c-example.html#a10">spot-data.c</a>, and <a class="el" href="spot-enroll_8c-example.html#a79">spot-enroll.c</a>.</dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
    Copyright &copy;2002-2025
    <a href="http://www.sensory.com/">Sensory Inc.</a>
    (Mon Feb 17 2025)
    <span class="confidential">
      <a href="license.html">Sensory Confidential</a>
    </span>
    </li>
  </ul>
</div>
</body>
</html>
